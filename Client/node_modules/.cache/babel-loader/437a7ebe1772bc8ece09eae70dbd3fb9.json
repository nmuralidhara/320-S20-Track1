{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Sean\\\\320-S20-Track1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Button,TextField,FormControlLabel,Link,Grid,Box,Typography,Container}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import users from\"../Data/users.json\";import Cookies from\"universal-cookie\";//Function that shows the copyright (will get updated to the appropiate one later)\nfunction Copyright(){return/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\"},\"Copyright Â© \",/*#__PURE__*/React.createElement(Link,{color:\"inherit\",href:\"https://github.com/david-fisher/320-S20-Track1/\"},\"King Codras\"),\" \",new Date().getFullYear(),\".\");}var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},form:{width:\"100%\",marginTop:theme.spacing(2)}};});export default function SignIn(){//sets styling\nvar classes=useStyles();//Email and password from the textbox\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];//sets up the encryption library\nvar bcrypt=require('bcryptjs');var salt=bcrypt.genSaltSync(10);//Gets run when submit is pressed and handles authentication.\nfunction handleSubmit(event){event.preventDefault();fetch(\"https://7jdf878rej.execute-api.us-east-2.amazonaws.com/test/login\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({UserEmail:email,Password:password})}).then(function(response){console.log(response);return response.json();}).then(function(json){console.log(json);if(json.token!==undefined){alert(\"Account Successfully Created!\");console.log(\"hooray! we have json!\");console.log(json);var cookies=new Cookies();cookies.remove(\"email\");cookies.remove(\"firstName\");cookies.remove(\"lastName\");cookies.remove(\"role\");cookies.remove(\"token\");cookies.set(\"email\",json.email,{path:\"/\"});cookies.set(\"firstName\",json.f_name,{path:\"/\"});cookies.set(\"lastName\",json.l_name,{path:\"/\"});cookies.set(\"role\",json.role,{path:\"/\"});cookies.set(\"token\",json.token,{path:\"/\"});window.location.reload();}else{throw new Error();}}).catch(function(error){alert(\"Invalid credentials\");console.log(error);});}//checks if they put in an email and password\nfunction validateForm(){return email.length>0&&password.length>0;}//So the user can press enter rather than click the button\nfunction handleKeyPress(event){if(event.key==='Enter'&&validateForm()){handleSubmit(event);}}//Notably here the button is disabled if the form isn't validated\nreturn/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Sign in\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",autoFocus:true,form:true,className:classes.form,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",form:true,className:classes.form,autoComplete:\"current-password\",onChange:function onChange(e){return setPassword(e.target.value);},onKeyPress:handleKeyPress}),/*#__PURE__*/React.createElement(Button,{margin:\"normal\",fullWidth:true,form:true,className:classes.form,variant:\"contained\",color:\"primary\",onClick:handleSubmit,disabled:!validateForm()},\"Sign In\"),/*#__PURE__*/React.createElement(Grid,{container:true,form:true,className:classes.form},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(Link,{href:\"/forgot-password\",variant:\"body2\"},\"Forgot password?\")),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Link,{href:\"/signup\",variant:\"body2\"},\"Don't have an account? Sign Up\"))))),/*#__PURE__*/React.createElement(Box,{mt:8},/*#__PURE__*/React.createElement(Copyright,null)));}","map":{"version":3,"sources":["C:/Users/Sean/320-S20-Track1/src/components/Pages/login.js"],"names":["React","useState","Button","TextField","FormControlLabel","Link","Grid","Box","Typography","Container","makeStyles","users","Cookies","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","form","width","SignIn","classes","email","setEmail","password","setPassword","bcrypt","require","salt","genSaltSync","handleSubmit","event","preventDefault","fetch","method","headers","Accept","body","JSON","stringify","UserEmail","Password","then","response","console","log","json","token","undefined","alert","cookies","remove","set","path","f_name","l_name","role","window","location","reload","Error","catch","error","validateForm","length","handleKeyPress","key","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button, TextField, FormControlLabel, Link, Grid, Box, Typography, Container } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport users from \"../Data/users.json\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\n//Function that shows the copyright (will get updated to the appropiate one later)\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright Â© \"}\r\n      <Link\r\n        color=\"inherit\"\r\n        href=\"https://github.com/david-fisher/320-S20-Track1/\"\r\n      >\r\n        King Codras\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\"\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n    marginTop: theme.spacing(2)\r\n  },\r\n }));\r\n\r\n\r\nexport default function SignIn() {\r\n  //sets styling\r\n  const classes = useStyles();\r\n\r\n  //Email and password from the textbox\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  //sets up the encryption library\r\n  var bcrypt = require('bcryptjs');\r\n  var salt = bcrypt.genSaltSync(10);\r\n\r\n  //Gets run when submit is pressed and handles authentication.\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    fetch(\r\n      \"https://7jdf878rej.execute-api.us-east-2.amazonaws.com/test/login\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          Accept: \"application/json\",\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n          UserEmail: email,\r\n          Password: password\r\n        })\r\n      }\r\n    )\r\n      .then(response => {\r\n        console.log(response);\r\n        return response.json();\r\n      })\r\n      .then(json => {\r\n        console.log(json);\r\n        if (json.token !== undefined) {\r\n          alert(\"Account Successfully Created!\");\r\n          console.log(\"hooray! we have json!\");\r\n          console.log(json);\r\n          const cookies = new Cookies();\r\n          cookies.remove(\"email\");\r\n          cookies.remove(\"firstName\");\r\n          cookies.remove(\"lastName\");\r\n          cookies.remove(\"role\");\r\n          cookies.remove(\"token\");\r\n          cookies.set(\"email\", json.email, {\r\n            path: \"/\"\r\n          });\r\n          cookies.set(\"firstName\", json.f_name, {\r\n            path: \"/\"\r\n          });\r\n          cookies.set(\"lastName\", json.l_name, {\r\n            path: \"/\"\r\n          });\r\n          cookies.set(\"role\", json.role, { path: \"/\" });\r\n          cookies.set(\"token\", json.token, { path: \"/\" });\r\n          window.location.reload();\r\n        }else {\r\n            throw new Error();\r\n          }\r\n      })\r\n      .catch(error => {\r\n        alert(\"Invalid credentials\");\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n\r\n  //checks if they put in an email and password\r\n  function validateForm() {\r\n    return email.length > 0 && password.length > 0;\r\n  }\r\n\r\n  //So the user can press enter rather than click the button\r\n  function handleKeyPress(event){\r\n    if(event.key === 'Enter' && validateForm()){\r\n      handleSubmit(event)\r\n    }\r\n  }\r\n\r\n  //Notably here the button is disabled if the form isn't validated\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <div className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form}>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n            form className={classes.form}\r\n            onChange={e => setEmail(e.target.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            form className={classes.form}\r\n            autoComplete=\"current-password\"\r\n            onChange={e => setPassword(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n          />\r\n          <Button\r\n            margin=\"normal\"\r\n            fullWidth\r\n            form className={classes.form}\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={handleSubmit}\r\n            disabled={!validateForm()}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container form className={classes.form}>\r\n            <Grid item xs>\r\n              <Link href=\"/forgot-password\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"/signup\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}