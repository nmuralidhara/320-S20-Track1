{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Sean\\\\320-S20-Track1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"C:\\\\Users\\\\Sean\\\\320-S20-Track1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useState}from\"react\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import{FormHelperText,FormControl}from\"@material-ui/core\";import Link from\"@material-ui/core/Link\";import Grid from\"@material-ui/core/Grid\";import Box from\"@material-ui/core/Box\";import Typography from\"@material-ui/core/Typography\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import users from\"../Data/users.json\";import{withStyles}from'@material-ui/core/styles';import Dialog from'@material-ui/core/Dialog';import MuiDialogTitle from'@material-ui/core/DialogTitle';import MuiDialogContent from'@material-ui/core/DialogContent';import MuiDialogActions from'@material-ui/core/DialogActions';import IconButton from'@material-ui/core/IconButton';import CloseIcon from'@material-ui/icons/Close';function Copyright(){return/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\"},\"Copyright © \",/*#__PURE__*/React.createElement(Link,{color:\"inherit\",href:\"https://github.com/david-fisher/320-S20-Track1/\"},\"King Codras\"),\" \",new Date().getFullYear(),\".\");}var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});var styles=function styles(theme){return{root:{margin:0,padding:theme.spacing(2)},closeButton:{position:'absolute',right:theme.spacing(1),top:theme.spacing(1),color:theme.palette.grey[500]}};};var DialogTitle=withStyles(styles)(function(props){var children=props.children,classes=props.classes,onClose=props.onClose,other=_objectWithoutProperties(props,[\"children\",\"classes\",\"onClose\"]);return/*#__PURE__*/React.createElement(MuiDialogTitle,Object.assign({disableTypography:true,className:classes.root},other),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},children),onClose?/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"close\",className:classes.closeButton,onClick:onClose},/*#__PURE__*/React.createElement(CloseIcon,null)):null);});var DialogContent=withStyles(function(theme){return{root:{padding:theme.spacing(2)}};})(MuiDialogContent);var DialogActions=withStyles(function(theme){return{root:{margin:0,padding:theme.spacing(1)}};})(MuiDialogActions);export default function SignUp(){var classes=useStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password2=_useState6[0],setPassword2=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),fname=_useState8[0],setFname=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),lname=_useState10[0],setLname=_useState10[1];var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);window.location.reload();};function validateForm(){return password===password2&&email.length>0&&password.length>0&&password2.length>0&&fname.length>0&&lname.length>0&&validEmail(email);}function samePass(pass,pass2){return password===password2;}function validEmail(address){return!!address.match(/.+@.+/);}function handleSubmitButton(event){handleSubmit(event);handleClickOpen();}function handleSubmit(event){var error=false;if(password!==password2){alert(\"Passwords must match!\");error=true;}for(var i=0;i<users.length;i++){if(users[i].email===email){alert(\"User already exists!\");error=true;break;}}if(!error){var bcrypt=require('bcryptjs');var salt=bcrypt.genSaltSync(10);var hash=bcrypt.hashSync(password,salt);setPassword(hash);}}function handleKeyPress(event){if(event.key==='Enter'){handleSubmit(event);}}return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Request a supporter account\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"fname\",label:\"First Name\",name:\"fname\",autoComplete:\"fname\",autoFocus:true,onChange:function onChange(e){return setFname(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"lname\",label:\"Last Name\",name:\"lname\",autoComplete:\"lname\",onChange:function onChange(e){return setLname(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}}),!validEmail(email)&&email.length>0&&/*#__PURE__*/React.createElement(FormControl,{className:classes.error,error:true},/*#__PURE__*/React.createElement(FormHelperText,null,\"Please enter a valid email\")),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"confirm password\",label:\"Confirm Password\",type:\"password\",id:\"Confirmpassword\",autoComplete:\"current-password\",onChange:function onChange(e){return setPassword2(e.target.value);},onKeyPress:handleKeyPress}),!samePass(password,password2)&&password.length>0&&password2.length>0&&/*#__PURE__*/React.createElement(FormControl,{className:classes.error,error:true},/*#__PURE__*/React.createElement(FormHelperText,null,\"Passwords do not match\")),/*#__PURE__*/React.createElement(Typography,{align:\"center\",variant:\"body2\"},\"By requesing an account you agree to ReachOut's\"),/*#__PURE__*/React.createElement(Grid,{container:true,align:\"center\"},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(Link,{href:\"/tos\",variant:\"body2\",justify:\"center\"},\"Terms and Condtitions\"))),/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:handleSubmitButton,disabled:!validateForm()},\"Create Account\"),/*#__PURE__*/React.createElement(Dialog,{onClose:handleClose,\"aria-labelledby\":\"customized-dialog-title\",open:open},/*#__PURE__*/React.createElement(DialogTitle,{id:\"customized-dialog-title\",onClose:handleClose},\"Supporter Account Requested\"),/*#__PURE__*/React.createElement(DialogContent,{dividers:true},/*#__PURE__*/React.createElement(Typography,{gutterBottom:true},\"Your request for a supporter account has been submitted.\"),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true},\"Please wait for an admin to review your submission. You will get an email when an admin makes a decision.\"),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true},\"If you are accepted as a supporter, you can sign in using the credentials you supplied.\")),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{autoFocus:true,href:\"/login\",color:\"primary\"},\"Back to sign in\"))),/*#__PURE__*/React.createElement(Grid,{container:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(Link,{href:\"/login\",variant:\"body2\"},\"Back to sign in\"))))),/*#__PURE__*/React.createElement(Box,{mt:8},/*#__PURE__*/React.createElement(Copyright,null)));}","map":{"version":3,"sources":["C:/Users/Sean/320-S20-Track1/src/components/Pages/signUpSupporter.js"],"names":["React","useState","Button","CssBaseline","TextField","FormHelperText","FormControl","Link","Grid","Box","Typography","makeStyles","Container","users","withStyles","Dialog","MuiDialogTitle","MuiDialogContent","MuiDialogActions","IconButton","CloseIcon","Copyright","Date","getFullYear","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","styles","root","padding","closeButton","position","right","top","color","grey","DialogTitle","props","children","classes","onClose","other","DialogContent","DialogActions","SignUp","email","setEmail","password","setPassword","password2","setPassword2","fname","setFname","lname","setLname","open","setOpen","handleClickOpen","handleClose","window","location","reload","validateForm","length","validEmail","samePass","pass","pass2","address","match","handleSubmitButton","event","handleSubmit","error","alert","i","bcrypt","require","salt","genSaltSync","hash","hashSync","handleKeyPress","key","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport {FormHelperText, FormControl} from \"@material-ui/core\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport users from \"../Data/users.json\"\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\r\nimport MuiDialogContent from '@material-ui/core/DialogContent';\r\nimport MuiDialogActions from '@material-ui/core/DialogActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link\r\n        color=\"inherit\"\r\n        href=\"https://github.com/david-fisher/320-S20-Track1/\"\r\n      >\r\n        King Codras\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\"\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  }\r\n}));\r\n\r\nconst styles = (theme) => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(2),\r\n  },\r\n  closeButton: {\r\n    position: 'absolute',\r\n    right: theme.spacing(1),\r\n    top: theme.spacing(1),\r\n    color: theme.palette.grey[500],\r\n  },\r\n});\r\n\r\nconst DialogTitle = withStyles(styles)((props) => {\r\n  const { children, classes, onClose, ...other } = props;\r\n  return (\r\n    <MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n      <Typography variant=\"h6\">{children}</Typography>\r\n      {onClose ? (\r\n        <IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      ) : null}\r\n    </MuiDialogTitle>\r\n  );\r\n});\r\n\r\nconst DialogContent = withStyles((theme) => ({\r\n  root: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles((theme) => ({\r\n  root: {\r\n    margin: 0,\r\n    padding: theme.spacing(1),\r\n  },\r\n}))(MuiDialogActions);\r\n\r\nexport default function SignUp() {\r\n  const classes = useStyles();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [password2, setPassword2] = useState(\"\");\r\n  const [fname, setFname] = useState(\"\");\r\n  const [lname, setLname] = useState(\"\");\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n    window.location.reload();\r\n  };\r\n\r\n  function validateForm() {\r\n    return password===password2 && email.length > 0 \r\n    && password.length > 0 && password2.length > 0 \r\n    && fname.length > 0 && lname.length > 0\r\n    && validEmail(email);\r\n  }\r\n\r\n  function samePass(pass, pass2){\r\n    return password===password2;\r\n  }\r\n\r\n  function validEmail(address) {\r\n    return !! address.match(/.+@.+/);\r\n  }\r\n\r\n  function handleSubmitButton(event){\r\n    handleSubmit(event)\r\n    handleClickOpen()\r\n  }\r\n\r\n  function handleSubmit(event) {\r\n    var error = false;\r\n    if(password !== password2){\r\n      alert(\"Passwords must match!\");\r\n      error=true;\r\n    }\r\n    for (var i = 0; i < users.length; i++){\r\n      if (users[i].email === email){\r\n        alert(\"User already exists!\");\r\n        error=true;\r\n        break;\r\n      }\r\n    }\r\n    if (!error){\r\n      var bcrypt = require('bcryptjs');\r\n      var salt = bcrypt.genSaltSync(10);\r\n      var hash = bcrypt.hashSync(password, salt);\r\n      setPassword(hash)\r\n    }\r\n  }\r\n\r\n  function handleKeyPress(event){\r\n    if(event.key === 'Enter'){\r\n      handleSubmit(event)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Request a supporter account\r\n        </Typography>\r\n        <form className={classes.form} noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"fname\"\r\n            label=\"First Name\"\r\n            name=\"fname\"\r\n            autoComplete=\"fname\"\r\n            autoFocus\r\n            onChange={e => setFname(e.target.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"lname\"\r\n            label=\"Last Name\"\r\n            name=\"lname\"\r\n            autoComplete=\"lname\"\r\n            onChange={e => setLname(e.target.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            onChange={e => setEmail(e.target.value)}\r\n          />\r\n          {!validEmail(email) && email.length > 0 && (\r\n            <FormControl className={classes.error} error>\r\n              <FormHelperText>\r\n                Please enter a valid email\r\n              </FormHelperText>\r\n            </FormControl>\r\n          )}\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n            autoComplete=\"current-password\"\r\n            onChange={e => setPassword(e.target.value)}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"confirm password\"\r\n            label=\"Confirm Password\"\r\n            type=\"password\"\r\n            id=\"Confirmpassword\"\r\n            autoComplete=\"current-password\"\r\n            onChange={e => setPassword2(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n          />\r\n          {!samePass(password, password2) && password.length > 0 && password2.length > 0 && (\r\n            <FormControl className={classes.error} error>\r\n              <FormHelperText>\r\n                Passwords do not match\r\n              </FormHelperText>\r\n            </FormControl>\r\n          )}\r\n          <Typography align=\"center\" variant=\"body2\">\r\n            By requesing an account you agree to ReachOut's\r\n          </Typography>\r\n          <Grid container align=\"center\">\r\n            <Grid item xs>\r\n              <Link href=\"/tos\" variant=\"body2\" justify=\"center\">\r\n                Terms and Condtitions\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n            onClick={handleSubmitButton}\r\n            disabled={!validateForm()}\r\n          >\r\n            Create Account\r\n          </Button>\r\n          <Dialog onClose={handleClose} aria-labelledby=\"customized-dialog-title\" open={open}>\r\n            <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\r\n              Supporter Account Requested\r\n            </DialogTitle>\r\n            <DialogContent dividers>\r\n              <Typography gutterBottom>\r\n              Your request for a supporter account has been submitted.\r\n              </Typography>\r\n              <Typography gutterBottom>\r\n              Please wait for an admin to review your submission. You will get an email \r\n              when an admin makes a decision. \r\n              </Typography>\r\n              <Typography gutterBottom>\r\n              If you are accepted as a supporter, you can sign in using the credentials you \r\n              supplied. \r\n              </Typography>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button autoFocus href=\"/login\" color=\"primary\">\r\n                Back to sign in\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"/login\" variant=\"body2\">\r\n                Back to sign in\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}